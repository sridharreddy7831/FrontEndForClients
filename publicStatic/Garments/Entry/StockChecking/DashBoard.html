<!doctype html>
<html lang="en">

<head>
    <title>Booking Customers Barcode</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- <link rel="stylesheet" href="./Laundry/css/bootstrap.min.css"> -->


    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">

    <link rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.css">

    <link rel="stylesheet" href="./Index/css/header.css">
</head>

<body>
    <header>
        <nav class="navbar navbar-expand-xl navbar-dark bg-dark" aria-label="Sixth navbar example" id="NavBarId">
            <div class="container-fluid">
                <a class="navbar-brand" href="#">MAGUVAA</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarsExample06" aria-controls="navbarsExample06" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <div class="collapse navbar-collapse" id="navbarsExample06">
                    <ul class="navbar-nav me-auto mb-2 mb-xl-0" id="KHeader">
                        <li class="nav-item Bookings">
                            <a href="../DashBoard.html" class="nav-link active">
                                <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi d-block mx-auto mb-1" viewBox="0 0 16 16">
                                    <path fill-rule="evenodd" d="M6 12.5a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-9a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v2a.5.5 0 0 1-1 0v-2A1.5 1.5 0 0 1 6.5 2h8A1.5 1.5 0 0 1 16 3.5v9a1.5 1.5 0 0 1-1.5 1.5h-8A1.5 1.5 0 0 1 5 12.5v-2a.5.5 0 0 1 1 0v2z">
                                    </path>
                                    <path fill-rule="evenodd" d="M.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L1.707 7.5H10.5a.5.5 0 0 1 0 1H1.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z">
                                    </path>
                                </svg>
                                Parent
                            </a>
                        </li>

                        <li class="nav-item Bookings">
                            <a class="nav-link active" aria-current="page" href="./Scan/BSTableFromScreen/BSTableFromScreen.html">
                                <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi d-block mx-auto mb-1" viewBox="0 0 16 16">
                                        <path d="M0 .5A.5.5 0 0 1 .5 0h3a.5.5 0 0 1 0 1H1v2.5a.5.5 0 0 1-1 0v-3Zm12 0a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-1 0V1h-2.5a.5.5 0 0 1-.5-.5ZM.5 12a.5.5 0 0 1 .5.5V15h2.5a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5v-3a.5.5 0 0 1 .5-.5Zm15 0a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1 0-1H15v-2.5a.5.5 0 0 1 .5-.5ZM4 4h1v1H4V4Z"></path>
                                        <path d="M7 2H2v5h5V2ZM3 3h3v3H3V3Zm2 8H4v1h1v-1Z"></path>
                                        <path d="M7 9H2v5h5V9Zm-4 1h3v3H3v-3Zm8-6h1v1h-1V4Z"></path>
                                        <path d="M9 2h5v5H9V2Zm1 1v3h3V3h-3ZM8 8v2h1v1H8v1h2v-2h1v2h1v-1h2v-1h-3V8H8Zm2 2H9V9h1v1Zm4 2h-1v1h-2v1h3v-2Zm-4 2v-1H8v1h2Z"></path>
                                        <path d="M12 9h2V8h-2v1Z"></path>
                                </svg>
                                QrCodes
                            </a>
                        </li>

                        <li class="nav-item Bookings">
                            <a class="nav-link active" aria-current="page" href="./Voucher/ShowAll/ShowAll.html">
                                <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi d-block mx-auto mb-1" viewBox="0 0 16 16">
                                        <path d="M1.92.506a.5.5 0 0 1 .434.14L3 1.293l.646-.647a.5.5 0 0 1 .708 0L5 1.293l.646-.647a.5.5 0 0 1 .708 0L7 1.293l.646-.647a.5.5 0 0 1 .708 0L9 1.293l.646-.647a.5.5 0 0 1 .708 0l.646.647.646-.647a.5.5 0 0 1 .708 0l.646.647.646-.647a.5.5 0 0 1 .801.13l.5 1A.5.5 0 0 1 15 2v12a.5.5 0 0 1-.053.224l-.5 1a.5.5 0 0 1-.8.13L13 14.707l-.646.647a.5.5 0 0 1-.708 0L11 14.707l-.646.647a.5.5 0 0 1-.708 0L9 14.707l-.646.647a.5.5 0 0 1-.708 0L7 14.707l-.646.647a.5.5 0 0 1-.708 0L5 14.707l-.646.647a.5.5 0 0 1-.708 0L3 14.707l-.646.647a.5.5 0 0 1-.801-.13l-.5-1A.5.5 0 0 1 1 14V2a.5.5 0 0 1 .053-.224l.5-1a.5.5 0 0 1 .367-.27zm.217 1.338L2 2.118v11.764l.137.274.51-.51a.5.5 0 0 1 .707 0l.646.647.646-.646a.5.5 0 0 1 .708 0l.646.646.646-.646a.5.5 0 0 1 .708 0l.646.646.646-.646a.5.5 0 0 1 .708 0l.646.646.646-.646a.5.5 0 0 1 .708 0l.646.646.646-.646a.5.5 0 0 1 .708 0l.509.509.137-.274V2.118l-.137-.274-.51.51a.5.5 0 0 1-.707 0L12 1.707l-.646.647a.5.5 0 0 1-.708 0L10 1.707l-.646.647a.5.5 0 0 1-.708 0L8 1.707l-.646.647a.5.5 0 0 1-.708 0L6 1.707l-.646.647a.5.5 0 0 1-.708 0L4 1.707l-.646.647a.5.5 0 0 1-.708 0l-.509-.51z"></path>
                                        <path d="M3 4.5a.5.5 0 0 1 .5-.5h6a.5.5 0 1 1 0 1h-6a.5.5 0 0 1-.5-.5zm0 2a.5.5 0 0 1 .5-.5h6a.5.5 0 1 1 0 1h-6a.5.5 0 0 1-.5-.5zm0 2a.5.5 0 0 1 .5-.5h6a.5.5 0 1 1 0 1h-6a.5.5 0 0 1-.5-.5zm0 2a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5zm8-6a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 0 1h-1a.5.5 0 0 1-.5-.5zm0 2a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 0 1h-1a.5.5 0 0 1-.5-.5zm0 2a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 0 1h-1a.5.5 0 0 1-.5-.5zm0 2a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 0 1h-1a.5.5 0 0 1-.5-.5z"></path>
                                </svg>
                                Voucher
                            </a>
                        </li>

                    </ul>
                    <ul class="navbar-nav">


                        <li id="HeaderLoginButtonId">
                            <a href="#" class="nav-link text-white" id="NavBarloginId">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi d-block mx-auto mb-1" viewBox="0 0 16 16">
                                    <path fill-rule="evenodd" d="M1 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H1zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm6.146-2.854a.5.5 0 0 1 .708 0L14 6.293l1.146-1.147a.5.5 0 0 1 .708.708L14.707 7l1.147 1.146a.5.5 0 0 1-.708.708L14 7.707l-1.146 1.147a.5.5 0 0 1-.708-.708L13.293 7l-1.147-1.146a.5.5 0 0 1 0-.708z">
                                    </path>
                                </svg>
                                Login
                            </a>
                        </li>

                        <div id="HeaderUserIdLi" class="visually-hidden dropdown text-end">
                            <a href="#" id="HeaderUserIdDropDown" data-bs-toggle="dropdown" aria-expanded="false" class="nav-link text-white dropdown-toggle">

                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-person-check-fill d-block mx-auto mb-1 d-none d-md-block" viewBox="0 0 16 16">
                                    <path fill-rule="evenodd" d="M15.854 5.146a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L12.5 7.793l2.646-2.647a.5.5 0 0 1 .708 0z">
                                    </path>
                                    <path d="M1 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H1zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z">
                                    </path>
                                </svg>

                                UserName
                            </a>
                            <ul class="dropdown-menu text-small">
                                <li><a class="dropdown-item" href="#" onclick="jVarGlobalClientObject.UI.ModalFuncs.Show()">
                                        <i class="bi bi-power" style="font-size: 1.3rem; color:orangered"></i>
                                        logout</a>
                                </li>
                            </ul>
                        </div>
                    </ul>

                </div>
            </div>
        </nav>
    </header>

    <main>
        <div class="container" id="KCont1">

            <div id="AlertSuccessId" class="alert alert-success alert-dismissible fade show mt-2" role="alert" style="display: none;">
                <strong id="AlertSuccessIdUserName">SavedPk</strong> User created sucessfully.
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>

            <div class="alert alert-danger d-none" role="alert" id="DangerAlertId">
                A simple danger alertâ€”check it out!
            </div>

            <div class="alert alert-success d-none" role="alert" id="SuccessAlertId">
                Success!
            </div>

        </div>

        <div class="container mt-2">
            <nav style="--bs-breadcrumb-divider: url(&#34;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8'%3E%3Cpath d='M2.5 0L1 1.5 3.5 4 1 6.5 2.5 8l4-4-4-4z' fill='%236c757d'/%3E%3C/svg%3E&#34;);" aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="../../Index/Index.html">Home</a></li>
                    <li class="breadcrumb-item"><a href="../../Entry/DashBoard.html">StockChecking</a></li>
                    <li class="breadcrumb-item active" aria-current="page">Vouchers</li>
                </ol>
            </nav>
        </div>
    </main>

    <div class="modal fade" id="LoginModalId" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Enter client user credentials</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="LoginFormPopUpId22" class="" onsubmit="return false" novalidate="">
                        <div class="mb-3 form-floating is-valid">
                            <input type="text" class="form-control" id="KUserNameInput" required="">
                            <label for="KUserNameInput">User Name</label>
                            <div class="invalid-feedback">
                                User Name cannot be empty.
                            </div>
                        </div>
                        <div class="mb-3 form-floating">
                            <input type="password" class="form-control" id="KPasswordInput" required="">
                            <label for="KPasswordInput">Password</label>
                            <div class="invalid-feedback">
                                Password cannot be empty.
                            </div>
                        </div>
                        <input type="submit" class=" btn btn-primary" onclick="GlobalFuncsForLogin.Login.LoginCheck()">
                    </form>
                </div>
            </div>
        </div>
    </div>

    <div class="modal" tabindex="-1" id="ModalCreateCustomerId">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Modal title</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>Under development.</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary">Save changes</button>
                </div>
            </div>
        </div>
    </div>

    <div id="AlertWarningId" class="alert alert-warning alert-dismissible fade show" role="alert" style="display:none;">
        <div id="AlertWarningMessageId"><strong>Sorry!</strong> Data not saved</div>
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>

    <footer class="footer mt-auto py-3 bg-light fixed-bottom">
    <div class="container">
        <div class="bg-light d-flex justify-content-between">
            <div>KeshavSoft</div>

            <div data-BaseString="Last refresh : " id="KLastRefreshDT">Last refresh : </div>
        </div>
    </div>
</footer>

<script src="/JSONApi/Js/Bs5/bootstrap.bundle.min.js"></script>

<script>
    class GlobalClassForLogin {
        constructor({ inProjectName }) {
            this.Config = {
                RouteStart: {
                    Start: "JSONProject",
                    SubRoute: "API",
                    HtmlPath: "",
                    AdminSubRoute: "AdminApi",
                },
                Modal: {
                    Id: "LoginModalId"
                },
                Public: {
                    ProjectName: ""
                },
                Customize: {
                    ModalPopUp: {
                        Show: true,
                        Type: "SweetAlert"
                    }
                },
                ClientSide: {
                    UrlForIp_Old: "https://api.ipify.org/",
                    UrlForIp: "http://httpbin.org/ip",
                }
            };

            if (inProjectName === undefined) {
                this.Config.Public.ProjectName = this.Config.RouteStart.Start
            } else {
                this.Config.RouteStart.Start = inProjectName;
                this.Config.Public.ProjectName = inProjectName;
            };
        };

        Login = {
            LocalStorage: {
                FirmDetails: ({ inUserName, inFirmDetails }) => {
                    localStorage.setItem("kUserName", inUserName);
                    localStorage.setItem("FirmDetails", JSON.stringify(inFirmDetails));
                }
            },
            LoginCheck: async () => {
                let jVarLocalObject = {};
                let jVarReturnData;

                jVarLocalObject.UserName = document.getElementById("KUserNameInput").value;
                jVarLocalObject.Password = document.getElementById("KPasswordInput").value;

                if (jVarLocalObject.UserName !== "" && jVarLocalObject.Password !== "") {
                    jVarReturnData = await this.Login.CheckUserNamePassword({ inUserName: jVarLocalObject.UserName, inPassword: jVarLocalObject.Password });

                    if (jVarReturnData.KTF) {
                        //  jVarGlobalClientObject.DataApi.Folders.PullData();
                    };
                };
            },
            CheckUserNamePassword: async ({ inUserName, inPassword }) => {
                let jVarLocalUserCheckRoute = this.Config.RouteStart.Start;
                let jVarLocalFetchUrl = `/${jVarLocalUserCheckRoute}/Validate/Users/InUserDataJson/ForUserNameAndPassword/TokenToCookie`;

                let response = await fetch(jVarLocalFetchUrl, {
                    method: 'POST',
                    headers: {
                        'Accept': 'application/json',
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ inUserName, inPassWord: inPassword })
                });
                let FetchDataJson = await response.json();

                if (FetchDataJson !== null) {
                    if (FetchDataJson.KTF) {
                        window.location.href = "";
                        var myModalEl = document.getElementById('LoginModalId');
                        console.log("myModalEl::", myModalEl);


                        var modal = new bootstrap.Modal(myModalEl) // Returns a Bootstrap modal instance
                        modal.hide();

                        this.Login.LocalStorage.FirmDetails({ inUserName, inFirmDetails: FetchDataJson });
                        this.Login.ClientSideCookieFuncs.CheckToken();
                        return await FetchDataJson;
                    } else {
                        document.getElementById("KUserNameInput").classList.add("is-invalid");
                    };
                };
            },
            StatusCodeFuncs: {
                Html: {
                    Code404: ({ inResponse }) => {
                        if (inResponse.status === 404) {
                            jVarGlobalAdmin.HTMLPrepare.jFBS4Alerts.AppendtoKCont1.dangerClosable({ inJVarDataToDisplay: `Html File not Found ${inResponse.url}` });
                            return null;

                        };


                        return inResponse.text();
                    }
                },
                Code403: ({ inResponse }) => {
                    if (inResponse.status === 403) {
                        let jVarLocalLoginFormPopUpId = document.getElementById("LoginFormPopUpId");

                        if (jVarLocalLoginFormPopUpId !== null) {
                            var myModal = new bootstrap.Modal(document.getElementById('exampleModal'), { keyboard: false, focus: true });
                            myModal.show();
                        };
                        return null;
                    };

                    return inResponse.json();
                }
            },
            ShowLoginDetailsOnDOM: {
                InHeader: () => {
                    let LocalUserName = localStorage.getItem("kUserName");
                    let jVarLocalHeaderLoginButtonId = document.getElementById("HeaderLoginButtonId");

                    if (jVarLocalHeaderLoginButtonId !== null) {
                        jVarLocalHeaderLoginButtonId.classList.add("visually-hidden");
                        document.getElementById("HeaderUserIdLi").classList.remove("visually-hidden");

                        if (LocalUserName !== null) {
                            document.getElementById("HeaderUserIdDropDown").innerHTML =
                                document.getElementById("HeaderUserIdDropDown").innerHTML.replace("UserName", LocalUserName);

                            document.getElementById('NavBarId').classList.remove("bg-danger");
                            document.getElementById('NavBarId').classList.add("bg-dark");
                        };
                    };
                }
            },
            ClientSideCookieFuncs: {
                getCookie: (name) => {
                    var nameEQ = name + "=";
                    var ca = document.cookie.split(';');
                    for (var i = 0; i < ca.length; i++) {
                        var c = ca[i];
                        while (c.charAt(0) == ' ') c = c.substring(1, c.length);
                        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
                    }
                    return null;
                },
                CheckToken: () => {
                    let jVarLocalCookieValue = this.Login.ClientSideCookieFuncs.getCookie("KToken");
                    if (jVarLocalCookieValue === null) {
                        localStorage.removeItem("kUserName");
                        localStorage.removeItem("FirmDetails");
                        this.Login.ClientSideCookieFuncs.DeleteCookie();

                        let jVarLocalId = this.Config.Modal.Id;
                        var myModal = new bootstrap.Modal(document.getElementById(jVarLocalId), { keyboard: true, focus: true });

                        myModal.show();
                    } else {
                        this.Login.ShowLoginDetailsOnDOM.InHeader();
                    };
                },
                DeleteCookie: () => {
                    document.cookie = "KToken=; expires=Thu, 01 Jan 1947 00:00:00 UTC; path=/;";
                }
            }
        };
    };
</script>

<script>
    let jVarGlobalPresentViewData;
    let jVarGlobalHBSData = {};
    let jVarGlobalProject = "JSONApi";
    let jVarGlobalSubRoute = "Api";

    let GlobalFuncsForLogin = new GlobalClassForLogin({ inProjectName: jVarGlobalProject });
    GlobalFuncsForLogin.Login.ClientSideCookieFuncs.CheckToken();

    let jVarHtmlLoginModalId = document.getElementById("LoginModalId");
    jVarHtmlLoginModalId.addEventListener('shown.bs.modal', function (event) {
        let jVarLocalSubmitButton = event.currentTarget.querySelector(".modal-body input[type='submit']");
        jVarLocalSubmitButton.focus();
    });
</script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.7.7/handlebars.min.js" integrity="sha512-RNLkV3d+aLtfcpEyFG8jRbnWHxUqVZozacROI4J2F1sTaDqo1dPQYs01OMi1t1w9Y2FdbSCDSQ2ZVdAC8bzgAg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <script src="https://cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script>
        <script src="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.js"></script>
    <script>
        let jFSearchInputKeyPress = (event) => {
            if (event.key === 'Enter') { // key code of the keybord key
                event.preventDefault();
                let jVarLocalCurrentTarget = event.currentTarget;
                let jVarLocalClosestCard = jVarLocalCurrentTarget.closest(".card");
                let jVarLocalTable = jVarLocalClosestCard.querySelector("table");

                // your code to Run
                LocalSearchTable({ inTable: jVarLocalTable });
            };
        };

        let myFunction = () => {
            var input, filter, table, tr, td, i;
            input = document.getElementById("SearchQrCodeTable");
            filter = input.value;
            table = document.getElementById("myTable");
            tr = table.getElementsByTagName("tr");
            console.log("1111111111 : ", input, filter);
            for (i = 0; i < tr.length; i++) {
                td = tr[i].getElementsByTagName("td")[0];
                if (td) {
                    console.log("222222 : ", td.innerHTML);

                    if (td.innerHTML.indexOf(filter) > -1) {
                        tr[i].style.display = "";
                    } else {
                        tr[i].style.display = "none";
                    }
                }
            }
        };

        function LocalSearchTable({ inTable }) {
            // Declare variables 
            var input, filter, table, tr, td, i;
            input = document.getElementById("SearchQrCodeTable");
            filter = input.value.toUpperCase();
            //table = document.getElementById("myTable");

            table = inTable;
            tr = table.getElementsByTagName("tr");

            // Loop through all table rows, and hide those who don't match the search query
            for (i = 0; i < tr.length; i++) {
                td = tr[i].getElementsByTagName("td");
                for (j = 0; j < td.length; j++) {
                    let tdata = td[j];
                    if (tdata) {
                        if (tdata.innerHTML.toUpperCase().indexOf(filter) > -1) {
                            tr[i].style.display = "";
                            break;
                        } else {
                            tr[i].style.display = "none";
                        }
                    }
                }
            }
        };
    </script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="./Js/headerChange.js"></script>

    <!-- <script type="module" src="./Js/Dashboard.js"></script> -->
</body>

</html>